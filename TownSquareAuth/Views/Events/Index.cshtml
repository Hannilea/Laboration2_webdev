@model IEnumerable<TownSquareAuth.Models.Event>

@{
    ViewData["Title"] = "Events";
}

<h1>Events</h1>
@Html.AntiForgeryToken() 

<p>
    <a asp-action="Create" class="btn btn-primary">Create New Event</a>
</p>
<p>
    Sort by: 
    <a asp-action="Index" asp-route-sortOrder="date_asc">Date ↑</a> |
    <a asp-action="Index" asp-route-sortOrder="date_desc">Date ↓</a> |
    <a asp-action="Index" asp-route-sortOrder="attending_asc">Fewest attending</a> |
    <a asp-action="Index" asp-route-sortOrder="attending_desc">Most attending</a>
</p>

<table class="table">
    <thead>
        <tr>
            <th>Title</th>
            <th>Date</th>
            <th>Time</th>
            <th>Location</th>
            <th>Category</th>
            <th>Organaizer</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
    @foreach (var item in Model)
    {
        <tr>
            <td>@item.Title</td>
            <td>@item.Date.ToShortDateString()</td>
            <td>@item.Time</td>
            <td>@item.Location</td>
            <td>@item.Category</td>
            <td>@(item.ApplicationUser != null ? item.ApplicationUser.Username : "Deleted User")</td>
            <td>
                <a asp-action="Details" asp-route-id="@item.Id">Details</a>
            </td>
        </tr>
    }
    </tbody>
</table>
<p>
    <a asp-action="MyEvents" class="btn btn-primary">My Events</a>
    <a asp-controller="Home" asp-action="Index" class="btn btn-primary">Home</a>
</p>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}

